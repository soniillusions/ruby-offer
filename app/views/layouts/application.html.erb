<!DOCTYPE html>
<html>
  <head>
    <title>ruby-offer</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= favicon_link_tag 'favicon.ico' %>

    <%= stylesheet_link_tag 'https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css' %>
    <%= javascript_include_tag 'https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js' %>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.0/font/bootstrap-icons.css" rel="stylesheet">


    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
  </head>

  <body>
  <% if notice.present? %>
    <div class="container-fluid notice-container">
      <i class="bi bi-exclamation-triangle-fill" style="display: inline-block"></i>
      <p class="notice" style="color: orange; display: inline-block"><%= notice %></p>
    </div>
  <% end %>

  <% if alert.present? %>
    <div class="container-fluid notice-container">
      <i class="bi bi-exclamation-triangle-fill" style="display: inline-block"></i>
      <p class="alert" style="color: darkgoldenrod; display: inline-block"><%= alert %></p>
    </div>
  <% end %>

  <div class="container">

    <nav class="navbar navbar-expand-lg custom-navbar">
      <div class="container-fluid">
        <%= link_to 'ruby-offer.ru', root_path, class: 'navbar-brand' %>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="<%= jobs_path %>">Вакансии</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="<%= resumes_path %>">Кандидаты</a>
            </li>

            <% if current_user && current_user.role == 'developer' && current_user.resume_condition == 0 %>
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="<%= new_user_resume_path(current_user.id) %>">Разместить резюме</a>
              </li>
            <% end %>

            <% if current_user && current_user.role == 'developer' && current_user.resume_condition == 1 %>
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="<%= edit_user_resume_path(current_user.id) %>">Изменить резюме</a>
              </li>
            <% end %>

            <% if current_user && current_user.role == 'employer' && current_user.job.blank? %>
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href='<%= new_user_job_path(current_user.id) %>'>Разместить вакансию</a>
              </li>
            <% end %>

            <% if current_user && current_user.role == 'employer' && current_user.job.present? %>
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="<%= edit_user_job_path(current_user.id) %>">Изменить вакансию</a>
              </li>
            <% end %>
          </ul>


          <ul class="navbar-nav ml-auto d-flex align-items-center">
            <% if user_signed_in? %>
              <li class="nav-item" style="margin-right: 10px">
                <span><%= current_user.email %></span>
              </li>
              <li class="nav-item">
                <%= link_to 'Выйти', destroy_user_session_path, data: { 'turbo-method': :delete, 'turbo-confirm': 'Выйти? Вы уверены?' } %>
              </li>
            <% else %>
              <li class="nav-item">
                <%= link_to 'Войти', new_user_session_path %>
              </li>
            <% end %>
          </ul>
        </div>
      </div>
    </nav>

    <%= yield %>

  </div>

  </body>
</html>
